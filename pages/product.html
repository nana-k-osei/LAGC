<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Love All Girls Club - Product Details" />
    <title>Product - Love All Girls Club</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&family=Playfair+Display:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body class="font-sans bg-white">
    <!-- Top Utility Bar -->
    <div class="w-full bg-black text-white text-sm py-2">
      <div class="container mx-auto px-8 flex justify-end space-x-6">
        <a href="#" class="hover:text-orange-500">Help</a>
        <a href="#" class="hover:text-orange-500">Book a Session</a>
        <a href="#" class="hover:text-orange-500">Join Us</a>
      </div>
    </div>

    <!-- Navigation -->
    <nav
      id="site-nav"
      class="fixed top-0 w-full bg-white z-50 border-b border-gray-100"
    >
      <div
        class="container mx-auto px-4 sm:px-9 py-4 flex justify-between items-center"
      >
        <a href="index.html">
          <img
            src="/assets/logos/LAG Black.png"
            alt="LAGC Logo"
            class="logo-img h-8 sm:h-10"
          />
        </a>

        <!-- Desktop Navigation -->
        <div class="hidden md:flex space-x-10 items-center">
          <a
            href="index.html"
            class="font-bold text-black uppercase tracking-wide text-sm hover:text-orange-500 transition"
            >Home</a
          >
          <a
            href="index.html#our-story"
            class="font-bold text-black uppercase tracking-wide text-sm hover:text-orange-500 transition"
            >About</a
          >
          <a
            href="shop.html"
            class="font-bold text-black uppercase tracking-wide text-sm hover:text-orange-500 transition"
            >Shop</a
          >
          <a
            href="#footer"
            class="font-bold text-black uppercase tracking-wide text-sm hover:text-orange-500 transition"
            >Contact</a
          >

          <!-- Icon Group -->
          <div class="flex items-center gap-4 pl-4 border-l border-gray-200">
            <!-- Account Icon with Dropdown -->
            <div class="relative">
              <button
                id="account-menu-btn"
                class="relative p-2 rounded-full hover:bg-gray-100 transition"
                title="Account"
                aria-label="Account menu"
              >
                <svg
                  class="w-5 h-5 text-black"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"
                  />
                </svg>
              </button>

              <!-- Dropdown Menu (Hidden by default) -->
              <div
                id="account-dropdown"
                class="hidden absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-xl border border-gray-200 z-50"
              >
                <!-- User Info -->
                <div
                  id="user-info-section"
                  class="hidden p-4 border-b border-gray-200"
                >
                  <p class="text-sm text-gray-600">Signed in as</p>
                  <p id="user-email" class="font-bold text-black truncate"></p>
                  <p
                    id="member-status"
                    class="text-xs text-orange-600 font-semibold mt-1"
                  ></p>
                </div>

                <!-- Logout Button (shown when logged in) -->
                <a
                  id="admin-link"
                  href="/pages/admin.html"
                  class="hidden block w-full px-4 py-2 text-left text-orange-600 hover:bg-orange-50 font-semibold border-t border-gray-200"
                >
                  ‚öôÔ∏è Admin Dashboard
                </a>
                <button
                  id="logout-btn"
                  class="hidden w-full px-4 py-2 text-left text-red-600 hover:bg-red-50 font-semibold border-t border-gray-200"
                >
                  Sign Out
                </button>

                <!-- Become Member Button (shown when not logged in) -->
                <a
                  id="user-menu-dropdown"
                  href="/pages/membership.html"
                  class="block w-full px-4 py-2 text-left text-orange-600 hover:bg-orange-50 font-semibold"
                >
                  Join Our Club
                </a>
              </div>
            </div>

            <!-- Favorites Icon -->
            <button
              class="relative p-2 rounded-full hover:bg-gray-100 transition"
              title="Favorites"
              aria-label="View favorites"
            >
              <svg
                class="w-5 h-5 text-black"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
                />
              </svg>
              <!-- Favorites badge (optional, for future) -->
              <span
                class="absolute -top-1 -right-1 inline-flex items-center justify-center w-5 h-5 bg-orange-500 text-white text-xs font-bold rounded-full shadow-lg transform scale-0 transition-transform duration-300"
                style="min-width: 20px; min-height: 20px"
              ></span>
            </button>

            <!-- Cart Icon -->
            <a
              href="cart.html"
              class="relative inline-flex items-center justify-center p-2"
              title="Shopping Cart"
            >
              <svg
                class="w-6 h-6 text-black"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  d="M7 4V3a1 1 0 011-1h8a1 1 0 011 1v1h4a1 1 0 110 2h-.941l1.856 11.736a2 2 0 01-1.965 2.261H5.05a2 2 0 01-1.965-2.26L4.941 6H4a1 1 0 110-2h3zm2 2h6V4H9v2z"
                />
              </svg>
              <!-- Cart counter badge - Modern style -->
              <span
                id="cart-count"
                class="absolute -top-1 -right-1 min-w-[22px] h-5 px-1.5 bg-gray-800 text-xs font-bold rounded-full flex items-center justify-center shadow-lg"
                style="
                  display: none;
                  font-size: 11px;
                  line-height: 1.2;
                  color: white !important;
                "
              ></span>
            </a>
          </div>
        </div>

        <!-- Mobile Cart Icon -->
        <a
          href="cart.html"
          class="md:hidden relative inline-flex items-center justify-center p-2"
          title="Shopping Cart"
        >
          <svg
            class="w-6 h-6 text-black"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M7 4V3a1 1 0 011-1h8a1 1 0 011 1v1h4a1 1 0 110 2h-.941l1.856 11.736a2 2 0 01-1.965 2.261H5.05a2 2 0 01-1.965-2.26L4.941 6H4a1 1 0 110-2h3zm2 2h6V4H9v2z"
            />
          </svg>
          <!-- Cart counter badge - Mobile -->
          <span
            id="cart-count-mobile"
            class="absolute -top-1 -right-1 min-w-[22px] h-5 px-1.5 bg-gray-800 text-xs font-bold rounded-full flex items-center justify-center shadow-lg"
            style="
              display: none;
              font-size: 11px;
              line-height: 1.2;
              color: white !important;
            "
          ></span>
        </a>

        <!-- Mobile Menu Button -->
        <button
          id="mobile-menu-btn"
          class="md:hidden flex flex-col space-y-1.5 p-2"
          aria-label="Toggle menu"
        >
          <span class="block w-6 h-0.5 bg-black transition-transform"></span>
          <span class="block w-6 h-0.5 bg-black transition-transform"></span>
          <span class="block w-6 h-0.5 bg-black transition-transform"></span>
        </button>
      </div>

      <!-- Mobile Navigation Menu -->
      <div
        id="mobile-menu"
        class="md:hidden bg-white border-t border-gray-100 max-h-0 overflow-hidden transition-all duration-300"
      >
        <div class="container mx-auto px-4 py-4 flex flex-col space-y-3">
          <a
            href="index.html"
            class="font-bold text-black uppercase tracking-wide text-sm py-2 hover:text-orange-500 transition"
            >Home</a
          >
          <a
            href="index.html#our-story"
            class="font-bold text-black uppercase tracking-wide text-sm py-2 hover:text-orange-500 transition"
            >About</a
          >
          <a
            href="shop.html"
            class="font-bold text-black uppercase tracking-wide text-sm py-2 hover:text-orange-500 transition"
            >Shop</a
          >
          <a
            href="#"
            class="font-bold text-black uppercase tracking-wide text-sm py-2 hover:text-orange-500 transition"
            >Contact</a
          >
        </div>
      </div>
    </nav>

    <!-- Breadcrumb -->
    <div class="mt-20 sm:mt-24 mb-8">
      <div class="container mx-auto px-8">
        <div class="flex items-center space-x-2 text-sm text-gray-600">
          <a href="shop.html" class="hover:text-orange-500 transition">Shop</a>
          <span>/</span>
          <span id="breadcrumb-category">Category</span>
          <span>/</span>
          <span id="breadcrumb-name" class="text-black font-semibold"
            >Product</span
          >
        </div>
      </div>
    </div>

    <!-- Loading Spinner -->
    <div
      id="product-loader"
      class="flex items-center justify-center py-24 bg-white"
    >
      <div class="text-center">
        <svg
          class="animate-spin h-12 w-12 text-orange-500 mx-auto mb-4"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
        >
          <circle
            class="opacity-25"
            cx="12"
            cy="12"
            r="10"
            stroke="currentColor"
            stroke-width="4"
          ></circle>
          <path
            class="opacity-75"
            fill="currentColor"
            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
          ></path>
        </svg>
        <p class="text-gray-600 font-semibold">Loading product details...</p>
      </div>
    </div>

    <!-- Product Details Section -->
    <section class="py-12 bg-white hidden" id="product-section">
      <div class="container mx-auto px-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-20">
          <!-- Product Image Gallery -->
          <div class="flex flex-col-reverse lg:flex-row gap-4">
            <!-- Thumbnail Gallery (Left Side) -->
            <div
              id="product-thumbnails-container"
              class="flex lg:flex-col gap-3 overflow-x-auto lg:overflow-x-visible lg:overflow-y-auto lg:max-h-96"
            >
              <!-- Thumbnails will be generated by JavaScript -->
            </div>

            <!-- Main Image Container (Right Side) -->
            <div class="flex-1 relative">
              <div
                class="relative w-full bg-gray-50 rounded-2xl overflow-hidden border border-gray-100"
                style="aspect-ratio: 1"
              >
                <img
                  id="product-image-main"
                  src=""
                  alt="Product"
                  class="w-full h-full object-cover"
                />
              </div>

              <!-- Navigation Arrows -->
              <button
                id="gallery-prev"
                class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-80 hover:bg-opacity-100 p-2 rounded-full transition z-10"
                aria-label="Previous image"
              >
                <svg
                  class="w-6 h-6 text-black"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 19l-7-7 7-7"
                  />
                </svg>
              </button>

              <button
                id="gallery-next"
                class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-80 hover:bg-opacity-100 p-2 rounded-full transition z-10"
                aria-label="Next image"
              >
                <svg
                  class="w-6 h-6 text-black"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 5l7 7-7 7"
                  />
                </svg>
              </button>
            </div>
          </div>

          <!-- Product Info -->
          <div class="flex flex-col justify-start">
            <!-- Breadcrumb Category -->
            <p
              id="product-category"
              class="text-orange-500 text-sm font-bold uppercase tracking-widest mb-4"
            >
              Category
            </p>

            <!-- Product Name -->
            <h1
              id="product-name"
              class="text-5xl md:text-6xl font-factoria font-bold mb-6 leading-tight"
            >
              Product Name
            </h1>

            <!-- Price -->
            <div class="flex items-end gap-4 mb-6">
              <div>
                <p id="product-price" class="text-5xl font-bold">‚Çµ120</p>
                <p
                  id="discounted-price"
                  class="text-green-600 text-2xl font-bold mt-2 hidden"
                >
                  <span class="text-sm text-gray-600">Member Price:</span>
                  <span id="discount-price-value">‚Çµ0</span>
                </p>
              </div>
              <p
                id="product-original-price"
                class="text-gray-400 line-through text-xl"
              ></p>
            </div>

            <!-- Description -->
            <p
              id="product-description"
              class="text-gray-700 text-lg mb-8 leading-relaxed"
            >
              Premium product description goes here.
            </p>

            <!-- Features -->
            <div class="mb-8">
              <h3 class="text-xl font-bold mb-4">Key Features</h3>
              <ul id="product-features" class="space-y-3">
                <li class="flex items-start gap-3">
                  <svg
                    class="w-5 h-5 text-orange-500 mt-1 flex-shrink-0"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M9 16.2L4.8 12m-1.5 1.5l9 9 12-12"
                      stroke="currentColor"
                      stroke-width="2"
                      fill="none"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                  <span class="text-gray-700">Feature 1</span>
                </li>
              </ul>
            </div>

            <!-- Size/Variant Selection (Optional) -->
            <div class="mb-8" id="size-section" style="display: none">
              <h3 class="text-lg font-bold mb-4">Select Size</h3>
              <div id="size-options" class="flex gap-3 flex-wrap">
                <!-- Sizes will be populated dynamically -->
              </div>
            </div>

            <!-- Color Selection (Optional) -->
            <div class="mb-8" id="color-section" style="display: none">
              <h3 class="text-lg font-bold mb-4">Select Color</h3>
              <div id="color-options" class="flex gap-3 flex-wrap">
                <!-- Colors will be populated dynamically -->
              </div>
            </div>

            <!-- Quantity Selector -->
            <div class="flex items-center gap-6 mb-8">
              <div class="flex items-center border border-gray-300 rounded-lg">
                <button
                  id="qty-decrease"
                  class="px-4 py-3 text-gray-600 hover:text-black transition"
                >
                  ‚àí
                </button>
                <input
                  type="number"
                  id="quantity"
                  value="1"
                  min="1"
                  class="w-16 text-center border-l border-r border-gray-300 py-3"
                  readonly
                />
                <button
                  id="qty-increase"
                  class="px-4 py-3 text-gray-600 hover:text-black transition"
                >
                  +
                </button>
              </div>
            </div>

            <!-- Add to Cart Button -->
            <div class="flex gap-4 mb-8">
              <button
                id="add-to-cart-btn"
                class="flex-1 bg-black text-white font-bold py-4 rounded-lg hover:bg-orange-500 transition duration-300 text-lg"
              >
                Add to Cart
              </button>
              <button
                id="add-to-favorites-btn"
                class="px-6 py-4 bg-white border-2 border-black rounded-lg hover:bg-gray-100 transition"
                title="Add to Favorites"
              >
                <svg
                  class="w-6 h-6"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
                  ></path>
                </svg>
              </button>
            </div>

            <!-- Shipping Info -->
            <div class="border-t border-b border-gray-200 py-6 space-y-4">
              <div class="flex items-start gap-4">
                <svg
                  class="w-6 h-6 text-orange-500 flex-shrink-0 mt-1"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9-4v4m0 0v4"
                  />
                </svg>
                <div>
                  <p class="font-bold text-black">Free Shipping</p>
                  <p class="text-gray-600 text-sm">On orders over ‚Çµ850</p>
                </div>
              </div>
              <div class="flex items-start gap-4">
                <svg
                  class="w-6 h-6 text-orange-500 flex-shrink-0 mt-1"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
                <div>
                  <p class="font-bold text-black">30-Day Returns</p>
                  <p class="text-gray-600 text-sm">
                    Hassle-free returns & exchanges
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Related Products Section -->
    <section class="py-20 bg-gray-50">
      <div class="container mx-auto px-8">
        <div class="mb-12">
          <h2 class="text-4xl md:text-5xl font-factoria font-bold mb-3">
            You May Also Like
          </h2>
          <div class="w-16 h-1 bg-orange-500 rounded-full"></div>
        </div>
        <div
          id="related-products"
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-10"
        >
          <!-- Related products will be populated dynamically -->
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black text-white py-12 mt-20">
      <div class="container mx-auto px-8">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-12">
          <div>
            <h4 class="font-bold text-lg mb-4">About LAGC</h4>
            <p class="text-gray-400 text-sm leading-relaxed">
              Love All Girls Club is a women-only tennis community dedicated to
              empowering girls through sports.
            </p>
          </div>
          <div>
            <h4 class="font-bold text-lg mb-4">Shop</h4>
            <ul class="space-y-2 text-gray-400 text-sm">
              <li>
                <a href="#" class="hover:text-orange-500 transition"
                  >Women's Apparel</a
                >
              </li>
              <li>
                <a href="#" class="hover:text-orange-500 transition"
                  >Tennis Shoes</a
                >
              </li>
              <li>
                <a href="#" class="hover:text-orange-500 transition"
                  >Accessories</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="font-bold text-lg mb-4">Support</h4>
            <ul class="space-y-2 text-gray-400 text-sm">
              <li>
                <a href="#" class="hover:text-orange-500 transition"
                  >Help Center</a
                >
              </li>
              <li>
                <a href="#" class="hover:text-orange-500 transition"
                  >Contact Us</a
                >
              </li>
              <li>
                <a href="#" class="hover:text-orange-500 transition"
                  >Shipping Info</a
                >
              </li>
            </ul>
          </div>
          <div>
            <h4 class="font-bold text-lg mb-4">Follow Us</h4>
            <div class="flex gap-6">
              <!-- Instagram -->
              <a
                href="https://www.instagram.com/loveallgirlsclub/"
                target="_blank"
                rel="noopener noreferrer"
                class="text-orange-500 hover:text-orange-400 transition"
                title="Instagram"
              >
                <svg
                  class="w-6 h-6"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <rect
                    x="2"
                    y="2"
                    width="20"
                    height="20"
                    rx="5"
                    ry="5"
                    stroke-width="2"
                  />
                  <path
                    d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"
                    stroke-width="2"
                    fill="currentColor"
                  />
                  <circle cx="17.5" cy="6.5" r="1.5" fill="currentColor" />
                </svg>
              </a>

              <!-- X (Twitter) -->
              <a
                href="#"
                class="text-orange-500 hover:text-orange-400 transition"
                title="X"
              >
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2s9 5 20 5a9.5 9.5 0 00-9-5.5c4.75 2.25 9-1.5 9-1.5s-2 3-5 3c2-2 3-5 3-5z"
                  />
                </svg>
              </a>

              <!-- LinkedIn -->
              <a
                href="#"
                class="text-orange-500 hover:text-orange-400 transition"
                title="LinkedIn"
              >
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z"
                  ></path>
                  <circle cx="4" cy="4" r="2"></circle>
                </svg>
              </a>
            </div>
          </div>
        </div>
        <div
          class="border-t border-gray-800 pt-8 text-center text-gray-400 text-sm"
        >
          <p>
            &copy; 2025 Love All Girls Club. All rights reserved. |
            <a
              href="https://www.linkedin.com/in/samuel-kwame-osei/"
              target="_blank"
              rel="noopener noreferrer"
              class="text-orange-500 hover:text-orange-400 transition"
              >Sam¬Æ</a
            >
          </p>
        </div>
      </div>
    </footer>

    <script type="module" src="/javascript/main.js"></script>

    <!-- Account Menu Handler -->
    <script type="module">
      import Authentication from "/javascript/ui/authentication.js";

      document.addEventListener("DOMContentLoaded", () => {
        const accountBtn = document.getElementById("account-menu-btn");
        const accountDropdown = document.getElementById("account-dropdown");
        const logoutBtn = document.getElementById("logout-btn");
        const adminLink = document.getElementById("admin-link");
        const userInfoSection = document.getElementById("user-info-section");
        const userEmail = document.getElementById("user-email");
        const memberStatus = document.getElementById("member-status");
        const becomeMemberDropdown =
          document.getElementById("user-menu-dropdown");

        if (!accountBtn) return; // Elements not found

        // Toggle dropdown when clicking account button
        accountBtn.addEventListener("click", (e) => {
          e.stopPropagation();
          accountDropdown.classList.toggle("hidden");
        });

        // Close dropdown when clicking outside
        document.addEventListener("click", (e) => {
          if (
            !accountBtn.contains(e.target) &&
            !accountDropdown.contains(e.target)
          ) {
            accountDropdown.classList.add("hidden");
          }
        });

        // Update UI based on auth state
        const updateAccountUI = () => {
          if (Authentication.currentUser) {
            // User is logged in
            userEmail.textContent = Authentication.currentUser.email;

            if (Authentication.isMember) {
              const discount = Authentication.getDiscount();
              if (discount > 0) {
                memberStatus.textContent = `‚úÖ Member ‚Ä¢ ${discount}% Discount`;
              } else {
                memberStatus.textContent = `‚úÖ Member`;
              }
            } else {
              memberStatus.textContent = "üë§ Account";
            }

            userInfoSection.classList.remove("hidden");

            // Only show admin link if user is admin
            if (Authentication.isAdmin()) {
              adminLink.classList.remove("hidden");
            } else {
              adminLink.classList.add("hidden");
            }
            logoutBtn.classList.remove("hidden");
            if (becomeMemberDropdown) {
              becomeMemberDropdown.classList.add("hidden");
            }
          } else {
            // User is not logged in
            userInfoSection.classList.add("hidden");
            adminLink.classList.add("hidden");
            logoutBtn.classList.add("hidden");
            if (becomeMemberDropdown) {
              becomeMemberDropdown.classList.remove("hidden");
            }
          }
        };

        // Handle logout
        logoutBtn.addEventListener("click", async () => {
          await Authentication.signOut();
          accountDropdown.classList.add("hidden");
          updateAccountUI();
          window.toast.success("You have been signed out", 3000);
        });

        // Watch for auth changes
        if (Authentication.currentUser) {
          updateAccountUI();
        }

        // Listen for auth state changes
        const originalOnUserLoggedIn = Authentication.onUserLoggedIn;
        const originalOnUserLoggedOut = Authentication.onUserLoggedOut;

        Authentication.onUserLoggedIn = function (user) {
          updateAccountUI();
          if (originalOnUserLoggedIn) originalOnUserLoggedIn.call(this, user);
        };

        Authentication.onUserLoggedOut = function () {
          updateAccountUI();
          if (originalOnUserLoggedOut) originalOnUserLoggedOut.call(this);
        };
      });
    </script>

    <!-- Product Discount Display Handler -->
    <script type="module">
      import Authentication from "/javascript/ui/authentication.js";

      // Update discount price display when page loads
      async function updateDiscountDisplay() {
        // Wait for auth to be ready
        await Authentication.waitForAuthReady();

        // Check if user is logged in and is a member
        if (!Authentication.currentUser || !Authentication.isMember) {
          return; // Not a member, don't show discount
        }

        const discount = Authentication.getDiscount();
        if (discount <= 0) {
          return; // No discount, don't show
        }

        // Get current product price
        const priceEl = document.getElementById("product-price");
        if (!priceEl) return;

        const priceText = priceEl.textContent.replace("‚Çµ", "").trim();
        const basePrice = parseFloat(priceText);
        if (isNaN(basePrice)) return;

        // Calculate discounted price
        const discountedPrice = basePrice * (1 - discount / 100);
        const savings = basePrice - discountedPrice;

        // Update the discounted price display
        const discountedPriceEl = document.getElementById("discounted-price");
        const discountPriceValueEl = document.getElementById(
          "discount-price-value"
        );

        if (discountedPriceEl && discountPriceValueEl) {
          discountPriceValueEl.textContent = `‚Çµ${discountedPrice.toFixed(2)}`;
          discountedPriceEl.classList.remove("hidden");

          // Add savings info
          const savingsEl = document.createElement("p");
          savingsEl.className = "text-sm text-gray-600 mt-1";
          savingsEl.textContent = `üíö Save ‚Çµ${savings.toFixed(
            2
          )} (${discount}% off)`;
          discountedPriceEl.appendChild(savingsEl);
        }
      }

      // Run on page load
      document.addEventListener("DOMContentLoaded", updateDiscountDisplay);
    </script>
  </body>
</html>
